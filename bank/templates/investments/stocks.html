<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stocks</title>
</head>
<body>
    <h1 style="position: relative; text-align: center;">Stock Trading</h1>
    
    <div style="position: relative; text-align: center; margin-bottom: 20px;">
        <a href="{{url_for("bank_views.investmentsPage", customer_name=customer_name)}}">Back to Portfolio</a>
    </div>
    
    {% if error %}
    <div style="color: red; text-align: center; margin-bottom: 20px;">
        {{ error }}
    </div>
    {% endif %}
    
    <!-- Buy Stocks Form -->
    <div style="margin: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px;">
        <h2>Buy Stocks</h2>
        <form method="POST">
            <input type="hidden" name="action" value="buy">
            <div style="margin-bottom: 10px;">
                <label for="stock_symbol">Select Stock:</label>
                <select name="stock_symbol" id="stock_symbol" required>
                    <option value="">-- Select a stock --</option>
                    {% for stock in available_stocks %}
                    <option value="{{ stock[0] }}">{{ stock[1] }} ({{ stock[0] }}) - ${{ stock[2] }}</option>
                    {% endfor %}
                </select>
            </div>
            <div style="margin-bottom: 10px;">
                <label for="amount">Number of Shares:</label>
                <input type="number" name="amount" id="amount" min="1" required>
            </div>
            <button type="submit">Buy Shares</button>
        </form>
    </div>
    
    <!-- Sell Stocks Form -->
    <div style="margin: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px;">
        <h2>Sell Stocks</h2>
        <form method="POST">
            <input type="hidden" name="action" value="sell">
            <div style="margin-bottom: 10px;">
                <label for="stock_symbol_sell">Select Stock:</label>
                <select name="stock_symbol" id="stock_symbol_sell" required>
                    <option value="">-- Select a stock --</option>
                    {% for stock in available_stocks %}
                    <option value="{{ stock[0] }}">{{ stock[1] }} ({{ stock[0] }}) - ${{ stock[2] }}</option>
                    {% endfor %}
                </select>
            </div>
            <div style="margin-bottom: 10px;">
                <label for="amount_sell">Number of Shares to Sell:</label>
                <input type="number" name="amount" id="amount_sell" min="1" required>
            </div>
            <button type="submit">Sell Shares</button>
        </form>
    </div>
    
    <!-- Available Stocks Table -->
    <div style="margin: 20px;">
        <h2>Available Stocks</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <tr style="background-color: #f2f2f2;">
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Symbol</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Name</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Price</th>
            </tr>
            {% for stock in available_stocks %}
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">{{ stock[0] }}</td>
                <td style="border: 1px solid #ddd; padding: 8px;">{{ stock[1] }}</td>
                <td style="border: 1px solid #ddd; padding: 8px;">${{ stock[2] }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    
    <script type="text/javascript" src="{{url_for('static', filename='index.js')}}"></script>
</body>
</html> 